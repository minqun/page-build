{"version":3,"sources":["task.js"],"names":["TableMove","el","console","log","name","tableHeight","tableWidth","start","pageX","pageY","targetY","targetX","width","height","dom","topLock","domStyle","event","target","nodeName","parentNode","clientHeight","clientWidth","i","addNode","offsetWidth","offsetHeight","getLocal","getTable","offsetX","offsetY","eventX","eventY","document","createElement","className","style","appendChild","querySelectorAll","removeChild","addEventListener","nowClick","move","up","tables","init"],"mappings":"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","file":"../js/task.js","sourcesContent":["class TableMove {\r\n    constructor(el) {\r\n        console.log(el)\r\n        this.name = 'table move support';\r\n        this.tableHeight = 0;\r\n        this.tableWidth = 0;\r\n        this.el = el;\r\n        this.start = false;\r\n        this.pageX = 0;\r\n        this.pageY = 0;\r\n        this.targetY = 0;\r\n        this.targetX = 0;\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this.dom = null;\r\n        this.topLock = false;\r\n        this.domStyle = 'position:absolute; width: 2px; background:red;z-index: 2;cursor:e-resize;'\r\n\r\n    }\r\n    getTable(event) {\r\n        let target = event.target;\r\n        while (target.nodeName != 'TABLE') {\r\n            target = target.parentNode\r\n        }\r\n        this.tableHeight = target.clientHeight\r\n        this.tableWidth = target.clientWidth\r\n\r\n    }\r\n    init() {\r\n        for (let i in this.el) {\r\n            if (typeof this.el[i] == 'object') {\r\n                this.addNode(this.el[i])\r\n                    // this.listen(this.el[i])\r\n            }\r\n\r\n        }\r\n    }\r\n    nowClick(event) {\r\n        this.start = true;\r\n        this.width = event.target.offsetWidth;\r\n        this.height = event.target.offsetHeight;\r\n        this.getLocal(event);\r\n        this.getTable(event)\r\n        this.topLock = true;\r\n        console.log('w:', this.width, 'h:', this.height)\r\n        console.log('px:', this.pageX, 'py:', this.pageY)\r\n        console.log('tx:', this.targetX, 'ty:', this.targetY)\r\n        this.addNode(event)\r\n    }\r\n    getLocal(event) {\r\n        this.pageX = event.pageX;\r\n        this.pageY = event.pageY;\r\n        this.targetX = event.offsetX;\r\n        this.targetY = event.offsetY;\r\n        this.eventX = event.pageX - event.offsetX;\r\n        if (!this.topLock) {\r\n            this.eventY = event.pageY - event.offsetY;\r\n        }\r\n    }\r\n    addNode(event) {\r\n        console.log(event)\r\n        let dom = document.createElement('div');\r\n        dom.className = \"dom-th\"\r\n        dom.style = `${this.domStyle}height:100%;top:${0}px;right:${0}px;`\r\n        event.appendChild(dom)\r\n        this.dom = document.querySelectorAll('.dom-th')\r\n\r\n    }\r\n    move(event) {\r\n        if (this.start) {\r\n            this.getLocal(event);\r\n            // console.log('w:',this.width, 'h:', this.height)\r\n            // console.log('px:',this.pageX, 'py:', this.pageY)\r\n            // console.log('tx:',this.targetX, 'ty:', this.targetY)\r\n            this.dom.style = `${this.domStyle}height:${this.tableHeight}px;top:${this.eventY}px;left:${this.pageX}px;`\r\n        }\r\n    }\r\n\r\n    up() {\r\n        if (this.start) {\r\n            this.start = false;\r\n            console.log('leave', event);\r\n            if (this.dom == null) return\r\n            let target = event.target;\r\n            while (target.nodeName != 'TH') {\r\n                target = target.parentNode\r\n            }\r\n            console.log(target, 'target')\r\n            target.removeChild(this.dom);\r\n            this.dom = null\r\n\r\n        }\r\n\r\n    }\r\n    listen(el) {\r\n        el.addEventListener('mousedown', (event) => {\r\n            this.nowClick(event);\r\n        }, false);\r\n        el.addEventListener('mousemove', (event) => {\r\n            this.move(event);\r\n        }, false);\r\n        el.addEventListener('mouseup', (event) => {\r\n            this.up();\r\n        }, false);\r\n        el.addEventListener('mouseleave', (event) => {\r\n            this.up();\r\n        }, false);\r\n    }\r\n}\r\nlet tables = new TableMove(document.querySelectorAll('th'))\r\ntables.init()\r\n"]}