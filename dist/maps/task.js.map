{"version":3,"sources":["task.js"],"names":["TableMove","el","console","log","name","tableHeight","tableWidth","start","pageX","pageY","targetY","targetX","width","height","dom","topLock","domStyle","event","target","nodeName","parentNode","clientHeight","clientWidth","i","listen","offsetWidth","offsetHeight","getLocal","getTable","addNode","offsetX","offsetY","eventX","eventY","document","createElement","className","appendChild","querySelector","style","removeChild","addEventListener","nowClick","move","up","tables","querySelectorAll","init"],"mappings":"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","file":"../js/task.js","sourcesContent":["class TableMove {\r\n    constructor (el) {\r\n        console.log(el)\r\n        this.name = 'table move support';\r\n        this.tableHeight= 0;\r\n        this.tableWidth =0;\r\n        this.el = el;\r\n        this.start = false;\r\n        this.pageX = 0;\r\n        this.pageY = 0;\r\n        this.targetY = 0;\r\n        this.targetX = 0;\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this.dom = null;\r\n        this.topLock = false;\r\n        this.domStyle = 'position:absolute; width: 1px; background:red;z-index: 2;'\r\n        \r\n    }\r\n    getTable (event) {\r\n        let target = event.target;\r\n        while (target.nodeName != 'TABLE') {\r\n            target = target.parentNode\r\n        }\r\n        this.tableHeight = target.clientHeight\r\n        this.tableWidth = target.clientWidth\r\n\r\n    }\r\n    init () {\r\n        for (let i in this.el) {\r\n            if (typeof this.el[i] == 'object') {\r\n                this.listen(this.el[i])\r\n            }\r\n          \r\n        }  \r\n    }\r\n    nowClick (event) {\r\n        this.start = true;\r\n        this.width = event.target.offsetWidth;\r\n        this.height = event.target.offsetHeight;\r\n        this.getLocal(event);\r\n        this.getTable(event)\r\n        this.topLock = true;\r\n        console.log('w:',this.width, 'h:', this.height)\r\n        console.log('px:',this.pageX, 'py:', this.pageY)\r\n        console.log('tx:',this.targetX, 'ty:', this.targetY)\r\n        this.addNode(event)\r\n    }\r\n    getLocal (event) {\r\n        this.pageX = event.pageX;\r\n        this.pageY = event.pageY;\r\n        this.targetX = event.offsetX;\r\n        this.targetY = event.offsetY;\r\n        this.eventX = event.pageX - event.offsetX;\r\n        if (!this.topLock) {\r\n            this.eventY = event.pageY- event.offsetY;\r\n        }\r\n    }\r\n    addNode (event) {\r\n        console.log(event)\r\n        let dom = document.createElement('div');\r\n        dom.className=\"dom-th\"\r\n        event.target.appendChild(dom)\r\n        this.dom = document.querySelector('.dom-th')\r\n        this.dom.style = `height:${this.tableHeight}px;${this.domStyle}top:${this.eventY}px;left:${this.pageX}px;`\r\n    }\r\n    move (event) {\r\n        if (this.start) {\r\n            this.getLocal(event);\r\n            // console.log('w:',this.width, 'h:', this.height)\r\n            // console.log('px:',this.pageX, 'py:', this.pageY)\r\n            // console.log('tx:',this.targetX, 'ty:', this.targetY)\r\n            this.dom.style = `height:${this.tableHeight}px;${this.domStyle}top:${this.eventY}px;left:${this.pageX}px;`\r\n        }\r\n    }\r\n  \r\n    up () {\r\n        if (this.start) {\r\n            this.start = false;\r\n            console.log('leave', event);\r\n            if (this.dom == null) return\r\n            let target = event.target;\r\n            while (target.nodeName != 'TH') {\r\n                target = target.parentNode\r\n            }\r\n            console.log(target,'target')\r\n            target.removeChild(this.dom);\r\n            this.dom = null\r\n           \r\n        }\r\n\r\n    }\r\n    listen (el) {\r\n        el.addEventListener('mousedown', (event)=> {\r\n            this.nowClick(event);\r\n        }, false);\r\n        el.addEventListener('mousemove', (event)=> {\r\n           this.move(event);\r\n        }, false);\r\n        el.addEventListener('mouseup', (event)=> {\r\n            this.up();\r\n        }, false);\r\n        el.addEventListener('mouseleave', (event)=> {\r\n          this.up();\r\n        }, false);\r\n    }\r\n}\r\nlet tables = new TableMove(document.querySelectorAll('th'))\r\ntables.init()"]}